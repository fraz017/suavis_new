<video autoplay id="video"></video>

<script>
    var ids = []
    navigator.mediaDevices.enumerateDevices()
   .then((devices) => {
       devices.find((device) => {
           if (device.kind === 'videoinput') {
               //const option = document.createElement('option');
               //option.text = device.label || 'camera '+ (videoDeviceElement.length + 1).toString();
               //option.value = device.deviceId;
               ids.push(device.deviceId) 
               // Store the camera ID in the select element to switch between the front-facing and rear-facing cameras
               // videoDeviceElement.appendChild(option);
           }
       });

       if (videoDeviceElement.length === 0) {
       } else {
           resolve(true);
       }
   })
   .catch((err) => {
   });
   console.log(ids)

   const constraints = {
    audio: false,
    video: {deviceId: {exact: ids.slice(-1).pop()}}
    };

navigator.mediaDevices.getUserMedia(constraints)
        .then((stream) => {
            // The variable "videoElement" is the video element, and it would bind camera stream to video for preview in real time
            videoElement = document.getElementById("video");
            videoElement.srcObject = stream;
            videoElement.style.display = 'block';
            videoElement.play();
            resolve(true);
        })
        .catch((err) => {
            //reject(err);
        });
</script>